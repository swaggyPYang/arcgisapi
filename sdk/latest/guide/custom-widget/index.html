<!DOCTYPE html><html><head><meta charset="utf-8"><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="content-language" content="en"><meta name="last-modified" content="Mon Sep 24 2018 13:34:57 GMT-0700 (Pacific Daylight Time)"><meta name="product" content="js-api-arcgis"><meta name="version" content="4.x"><meta name="subject" content="DEVELOPER,WEB,WEB APPLICATIONS,MOBILE"><meta name="subject_label" content="DEVELOPER,WEB,WEB APPLICATIONS,MOBILE"><meta name="sub_category" content="JavaScript API"><meta name="sub_category_label" content="ArcGIS API for JavaScript"><meta name="content_type" content="Guide"><meta name="content_type_label" content="Guide"><meta name="search-collection" content="help"><meta name="search-category" content="help-api,help-api-guide"><title>Widget development | ArcGIS API for JavaScript 4.9</title><link rel="shortcut icon" href="../../../assets/img/favicon.ico"><link rel="stylesheet" href="../../../assets/css/default.css"></head><body><developers-account-notifications></developers-account-notifications><div class="wrapper"><header class="top-nav top-nav-hover-top"><div class="grid-container"><div class="column-24 tablet-show"><div class="dropdown js-dropdown left"><a href="#" class="icon-ui-menu top-nav-title js-drawer-toggle top-nav-title-tablet" data-drawer="top-nav">ArcGIS API for JavaScript</a></div></div><div class="column-24 leader-1 trailer-1 tablet-leader-0">Go to <a href="https://developers.arcgis.com/javascript/">Latest version (official documentation)</a></div></div></header><header class="sub-nav sub-nav-purple"><div class="grid-container"><nav class="breadcrumbs breadcrumbs-white clearfix padding-leader-1"><a href="/web-api/" class="crumb">ArcGIS Web API</a> <a href="../../.." class="crumb">JavaScript API</a> <a href="../../.." class="crumb">4.9</a> <a href="../../../latest/guide/index.html" class="crumb">Guide</a></nav><h1 class="sub-nav-title text-white leader-1">ArcGIS API for JavaScript</h1><nav class="sub-nav-list leader-0 tablet-hide"><a class="sub-nav-link" href="../../../index.html">Home</a> <a class="sub-nav-link is-active" href="../../../latest/guide/index.html">Guide</a> <a class="sub-nav-link" href="../../../latest/api-reference/index.html">API Reference</a> <a class="sub-nav-link" href="../../../latest/sample-code/index.html">Sample Code</a> <a class="sub-nav-link" href="../../../support/index.html">Support</a></nav><select class="select-full trailer-half tablet-show js-select-nav"><option value="../../../index.html">Home</option><option selected="selected" value="../../../latest/guide/index.html">Guide</option><option value="../../../latest/api-reference/index.html">API Reference</option><option value="../../../latest/sample-code/index.html">Sample Code</option><option value="../../../support/index.html">Support</option></select></div></header><div id="skip-to-content"><div class="grid-container leader-1"><div class="column-6 trailer-2 tablet-hide"><aside class="accordion side-nav column-6 js-accordion guide"><div class="accordion-section"><h4 class="accordion-title">Get Started</h4><nav class="accordion-content"><a href="../../../latest/guide/index.html" class="side-nav-link">Overview</a></nav><nav class="accordion-content"><a href="../../../latest/guide/release-notes/index.html" class="side-nav-link">Release notes</a></nav><nav class="accordion-content"><a href="../../../latest/guide/get-api/index.html" class="side-nav-link">Get the API</a></nav><nav class="accordion-content"><a href="../../../latest/guide/system-requirements/index.html" class="side-nav-link">System requirements</a></nav></div><div class="accordion-section"><h4 class="accordion-title">Migrating from 3.x</h4><nav class="accordion-content"><a href="../../../latest/guide/choose-version/index.html" class="side-nav-link">Choose a version</a></nav><nav class="accordion-content"><a href="../../../latest/guide/migrating/index.html" class="side-nav-link">Migrating from 3.x to 4.9</a></nav><nav class="accordion-content"><a href="../../../latest/guide/functionality-matrix/index.html" class="side-nav-link">3.x to 4.x functionality matrix</a></nav></div><div class="accordion-section"><h4 class="accordion-title">Migrating from other APIs</h4><nav class="accordion-content"><a href="../../../latest/guide/migrating-from-google-maps-to-arcgis-javascript-api/index.html" class="side-nav-link">Migrating from Google Maps API</a></nav></div><div class="accordion-section is-active"><h4 class="accordion-title">Working with the API</h4><nav class="accordion-content"><a href="../../../latest/guide/working-with-props/index.html" class="side-nav-link">Properties</a></nav><nav class="accordion-content"><a href="../../../latest/guide/working-with-promises/index.html" class="side-nav-link">Promises</a></nav><nav class="accordion-content"><a href="../../../latest/guide/arcade/index.html" class="side-nav-link">Arcade</a></nav><nav class="accordion-content"><a href="../../../latest/guide/labeling/index.html" class="side-nav-link">Labeling</a></nav><nav class="accordion-content"><a href="../../../latest/guide/view-ui/index.html" class="side-nav-link">View UI</a></nav><nav class="accordion-content"><a href="../../../latest/guide/autocasting/index.html" class="side-nav-link">Autocasting</a></nav><nav class="accordion-content"><a href="../../../latest/guide/loadable/index.html" class="side-nav-link">Loadable</a></nav><nav class="accordion-content"><a href="../../../latest/guide/using-fromjson/index.html" class="side-nav-link">Using fromJSON()</a></nav><nav class="accordion-content"><a href="../../../latest/guide/typescript-setup/index.html" class="side-nav-link">TypeScript Setup</a></nav><nav class="accordion-content"><a href="../../../latest/guide/custom-widget/index.html" class="side-nav-link is-active">Widget Development</a></nav><nav class="accordion-content"><a href="../../../latest/guide/implementing-accessor/index.html" class="side-nav-link">Implementing Accessor</a></nav><nav class="accordion-content"><a href="../../../latest/guide/styling/index.html" class="side-nav-link">Styling</a></nav><nav class="accordion-content"><a href="../../../latest/guide/working-with-platform/index.html" class="side-nav-link">Working with the ArcGIS platform</a></nav><nav class="accordion-content"><a href="../../../latest/guide/secure-resources/index.html" class="side-nav-link">Access Secure Resources</a></nav><nav class="accordion-content"><a href="../../../latest/guide/using-frameworks/index.html" class="side-nav-link">Using Frameworks</a></nav><nav class="accordion-content"><a href="../../../latest/guide/using-npm/index.html" class="side-nav-link">Using npm</a></nav><nav class="accordion-content"><a href="../../../latest/guide/using-webpack/index.html" class="side-nav-link">Using webpack</a></nav><nav class="accordion-content"><a href="../../../latest/guide/using-phonegap/index.html" class="side-nav-link">Using PhoneGap</a></nav><nav class="accordion-content"><a href="../../../latest/guide/intro-workflows/index.html" class="side-nav-link">Intro to Workflow Manager</a></nav><nav class="accordion-content"><a href="../../../latest/guide/working-with-scene-layers/index.html" class="side-nav-link">Working with scene layers</a></nav></div><div class="accordion-section"><h4 class="accordion-title">Visualization</h4><nav class="accordion-content"><a href="../../../latest/guide/visualization-overview/index.html" class="side-nav-link">Visualization Overview</a></nav><nav class="accordion-content"><a href="../../../latest/guide/creating-visualizations-manually/index.html" class="side-nav-link">Creating visualizations manually</a></nav><nav class="accordion-content"><a href="../../../latest/guide/visualizing-points-3d/index.html" class="side-nav-link">Visualizing points with 3D symbols</a></nav></div><div class="accordion-section"><h4 class="accordion-title">Reference</h4><nav class="accordion-content"><a href="../../../latest/guide/cors/index.html" class="side-nav-link">CORS</a></nav><nav class="accordion-content"><a href="../../../latest/guide/proxies/index.html" class="side-nav-link">Proxy pages</a></nav><nav class="accordion-content"><a href="../../../latest/guide/esri-icon-font/index.html" class="side-nav-link">Esri Icon Font</a></nav><nav class="accordion-content"><a href="../../../latest/guide/esri-web-style-symbols/index.html" class="side-nav-link">Esri Web Style Symbols</a></nav><nav class="accordion-content"><a href="../../../latest/guide/localization/index.html" class="side-nav-link">Localization</a></nav><nav class="accordion-content"><a href="../../../latest/guide/licensing/index.html" class="side-nav-link">Licensing &amp; Attribution</a></nav><nav class="accordion-content"><a href="../../../latest/guide/faq/index.html" class="side-nav-link">FAQ</a></nav></div></aside><div class="column-6 js-sticky scroll-show tablet-hide" data-top="46"><a href="#" class="btn btn-fill btn-clear">Back to Top</a></div></div><div class="column-24 trailer-1 tablet-show"><select class="select-full trailer-half js-select-nav"><optgroup label="Get Started"><option value="../../../latest/guide/index.html">Overview</option><option value="../../../latest/guide/release-notes/index.html">Release notes</option><option value="../../../latest/guide/get-api/index.html">Get the API</option><option value="../../../latest/guide/system-requirements/index.html">System requirements</option></optgroup><optgroup label="Migrating from 3.x"><option value="../../../latest/guide/choose-version/index.html">Choose a version</option><option value="../../../latest/guide/migrating/index.html">Migrating from 3.x to 4.9</option><option value="../../../latest/guide/functionality-matrix/index.html">3.x to 4.x functionality matrix</option></optgroup><optgroup label="Migrating from other APIs"><option value="../../../latest/guide/migrating-from-google-maps-to-arcgis-javascript-api/index.html">Migrating from Google Maps API</option></optgroup><optgroup label="Working with the API"><option value="../../../latest/guide/working-with-props/index.html">Properties</option><option value="../../../latest/guide/working-with-promises/index.html">Promises</option><option value="../../../latest/guide/arcade/index.html">Arcade</option><option value="../../../latest/guide/labeling/index.html">Labeling</option><option value="../../../latest/guide/view-ui/index.html">View UI</option><option value="../../../latest/guide/autocasting/index.html">Autocasting</option><option value="../../../latest/guide/loadable/index.html">Loadable</option><option value="../../../latest/guide/using-fromjson/index.html">Using fromJSON()</option><option value="../../../latest/guide/typescript-setup/index.html">TypeScript Setup</option><option value="../../../latest/guide/custom-widget/index.html" selected="selected">Widget Development</option><option value="../../../latest/guide/implementing-accessor/index.html">Implementing Accessor</option><option value="../../../latest/guide/styling/index.html">Styling</option><option value="../../../latest/guide/working-with-platform/index.html">Working with the ArcGIS platform</option><option value="../../../latest/guide/secure-resources/index.html">Access Secure Resources</option><option value="../../../latest/guide/using-frameworks/index.html">Using Frameworks</option><option value="../../../latest/guide/using-npm/index.html">Using npm</option><option value="../../../latest/guide/using-webpack/index.html">Using webpack</option><option value="../../../latest/guide/using-phonegap/index.html">Using PhoneGap</option><option value="../../../latest/guide/intro-workflows/index.html">Intro to Workflow Manager</option><option value="../../../latest/guide/working-with-scene-layers/index.html">Working with scene layers</option></optgroup><optgroup label="Visualization"><option value="../../../latest/guide/visualization-overview/index.html">Visualization Overview</option><option value="../../../latest/guide/creating-visualizations-manually/index.html">Creating visualizations manually</option><option value="../../../latest/guide/visualizing-points-3d/index.html">Visualizing points with 3D symbols</option></optgroup><optgroup label="Reference"><option value="../../../latest/guide/cors/index.html">CORS</option><option value="../../../latest/guide/proxies/index.html">Proxy pages</option><option value="../../../latest/guide/esri-icon-font/index.html">Esri Icon Font</option><option value="../../../latest/guide/esri-web-style-symbols/index.html">Esri Web Style Symbols</option><option value="../../../latest/guide/localization/index.html">Localization</option><option value="../../../latest/guide/licensing/index.html">Licensing &amp; Attribution</option><option value="../../../latest/guide/faq/index.html">FAQ</option></optgroup></select></div><main class="column-17 tablet-column-12 pre-1 content-face"><article><div class="js-container-guide"><h1 id="widget-development">Widget development</h1><p>Widgets are reusable user-interface components and are key to providing a rich user experience. The ArcGIS for JavaScript API provides a set of ready-to-use widgets. Beginning with version 4.2, it also provides a foundation for you to create custom widgets.</p><p>This guide topic discusses the basic fundamentals of widget development. It does so by discussing specific areas that you should focus on when transitioning to this new framework. The foundation for creating custom widgets remains consistent, regardless of the widget's intended functionality. The <a href="#additional-information">Additional information</a> section has extra resources to help get you started.</p><div class="esri-md panel trailer-1"><p>Please note that this framework is not intended to be a direct replacement for all Dijits. One such example would be when working with <a href="http://dgrid.io/">dgrid</a>. Here, you would still need to use <a href="http://dojotoolkit.org/reference-guide/dijit/">Dijit</a>.</p></div><p>This topic discusses:</p><ul><li><a href="#development-requirements">Development requirements</a></li><li><a href="#widget-life-cycle">Widget life cycle</a></li><li><a href="#typescript-decorators">TypeScript decorators</a></li><li><a href="#widget-implementation">Widget implementation</a></li><li><a href="#completed-code">Completed code</a></li><li><a href="#widget-rendering">Widget rendering</a></li><li><a href="#additional-information">Additional information</a></li></ul><div class="esri-md panel trailer-1"><p>This guide is intended to provide a high-level overview of the widget framework. Please refer to the <a href="../../sample-code/widgets-custom-widget/index.html">Create custom widget</a> and <a href="../../sample-code/widgets-custom-recenter/index.html">Recenter widget</a> samples for examples of how to create your own custom widget.</p></div><h2 id="development-requirements">Development requirements</h2><p>Prior to creating your own custom widgets, you will need to make certain you have the needed requirements. These will vary based on your widget requirements. The ones listed below are a bare minimum for widget development.</p><h3 id="typescript">TypeScript</h3><p><a href="https://www.typescriptlang.org">TypeScript</a> is a superset of JavaScript. Once written, it can be compiled to plain JavaScript. The suggested approach to widget development is through TypeScript. There is a multitude of great <a href="https://www.sitepen.com/blog/2013/12/31/definitive-guide-to-typescript">online resources</a> that go into detail on what TypeScript is, why it is used, and how you use it. Getting yourself familiarized with these basics will make the widget development process much easier to navigate.</p><h3 id="jsx">JSX</h3><p><a href="https://www.typescriptlang.org/docs/handbook/jsx.html">JSX</a> is a JavaScript extension syntax that allows us to describe our widget UI's similarly to HTML. It looks similar to HTML in that it can be used inline with JavaScript.</p><h3 id="familiarity-with-esricoreaccessor">Familiarity with esri/core/Accessor</h3><p><a href="../../api-reference/esri-core-Accessor.html">Accessor</a> is one of the core features of 4.x and is the base for all classes, including widgets. Please see the <a href="../../guide/implementing-accessor/index.html">Implementing Accessor</a> topic for additional details on how this works and its usage patterns.</p><h2 id="widget-life-cycle">Widget life cycle</h2><p>Before you begin developing, it's important to have a general understanding of a widget's life cycle. Regardless of the type of widget, the general concepts specific to its life cycle remain the same. These are:</p><ol><li><strong>constructor (params)</strong> - This is where the widget is initially created while setting any needed properties. Since the widget is derived from <a href="../../api-reference/esri-core-Accessor.html">Accessor</a>, you get access to getting, setting, and watching properties as discussed in the <a href="../working-with-props/index.html">Working with properties</a> topic.</li><li><strong>postInitialize()</strong> - This <a href="../../api-reference/esri-widgets-Widget.html#postInitialize">method</a> is called after the widget is created but before the UI is rendered.</li><li><strong>render()</strong> - This is the only <a href="../../api-reference/esri-widgets-Widget.html#render">required method</a> and is used to render the UI.</li><li><strong>destroy()</strong> - <a href="../../api-reference/esri-widgets-Widget.html#destroy">Method</a> to release the widget instance.</li></ol><h2 id="typescript-decorators">TypeScript decorators</h2><p>Widget development takes advantage of <a href="https://www.typescriptlang.org/docs/handbook/decorators.html">TypeScript decorators</a>. This allows us to define and modify common behavior in existing properties, methods, and constructors at design time. We discuss the most common types of widget decorators below.</p><h3 id="subclass-used-in-conjunction-with-declared"><code>@subclass</code> (used in conjunction with <code>declared</code>)</h3><p>These decorators can be thought of as the underlying glue that is used to create 4.x classes.</p><p>The snippet below imports and extends the <code>esri/widgets/Widget</code> class and defines the UI in the <a href="../../api-reference/esri-widgets-Widget.html#render">render</a> method. <a href="https://www.typescriptlang.org/docs/handbook/jsx.html">JSX</a> is used to define the UI. In this simple scenario, a <code>div</code> element with <code>John Smith</code> as its content is created.</p><pre><code class="ts">import Widget = require("esri/widgets/Widget");

@subclass("esri.widgets.HelloWorld")
class HelloWorld extends declared(Widget) {
  render() {
    return (
      &lt;div&gt;John Smith&lt;/div&gt;
    );
  }
}
</code></pre><h3 id="property"><code>@property()</code></h3><p>This <a href="../../api-reference/esri-core-accessorSupport-decorators.html#property">decorator</a> is used to define an <a href="../../api-reference/esri-core-Accessor.html">Accessor</a> property. Any property defined with this decorator can now be <code>get</code> and <code>set</code>. In addition, you can <code>watch</code> for any property changes.</p><pre><code class="ts"><span class="hljs-meta">@property</span>()
name: <span class="hljs-built_in">string</span>;
</code></pre><h3 id="renderable"><code>@renderable()</code></h3><p>This <a href="../../api-reference/esri-widgets-support-widget.html#renderable">decorator</a> is used to schedule the render whenever a property is modified, the rendering is automatically scheduled and updated.</p><pre><code class="ts"><span class="hljs-meta">@renderable</span>()
name: <span class="hljs-built_in">string</span>;
</code></pre><div class="esri-md panel trailer-1"><p>Usually, when implementing class properties, you will use both <code>@property()</code> and <code>@renderable()</code>. For example,</p><pre><code class="ts"><span class="hljs-meta">@property</span>()
<span class="hljs-meta">@renderable</span>()
name: <span class="hljs-built_in">string</span>;
</code></pre></div><h3 id="aliasof"><code>@aliasOf()</code></h3><p>This <a href="../../api-reference/esri-core-accessorSupport-decorators.html#aliasOf">decorator</a> allows us to define a property alias. This can help keep code clean so as to not duplicate existing properties, (e.g. already implemented within a <code>ViewModel</code>). <em>The full sample provided above does not use this decorator. If there was an associated <code>HelloWorldViewModel</code> associated with this file, its properties could be accessed directly via this approach therefore avoiding code duplication.</em></p><pre><code class="ts"><span class="hljs-meta">@aliasOf</span>(<span class="hljs-string">"viewModel.name"</span>)
name: <span class="hljs-built_in">string</span>;
</code></pre><h2 id="widget-implementation">Widget implementation</h2><p>The following steps provide a very high-level overview of the steps needed when implementing your own custom widget:</p><ul><li><a href="#extend-the-widget">Extend the widget</a></li><li><a href="#implement-properties-and-methods">Implement properties and methods</a></li><li><a href="#render-the-widget">Render the widget</a></li><li><a href="#export-module">Export module</a></li></ul><h3 id="extend-the-widget">Extend the widget</h3><p>At the very basic level, you will start by creating a widget by extending from the base <a href="../../api-reference/esri-widgets-Widget.html">Widget</a> class.</p><pre><code class="ts"><span class="hljs-comment">// Import used to extend off of base Widget class</span>
<span class="hljs-keyword">import</span> Widget = <span class="hljs-built_in">require</span>(<span class="hljs-string">"esri/widgets/Widget"</span>);

<span class="hljs-meta">@subclass</span>(<span class="hljs-string">"esri.widgets.HelloWorld"</span>)
<span class="hljs-keyword">class</span> HelloWorld <span class="hljs-keyword">extends</span> declared(Widget) {

}
</code></pre><h3 id="implement-properties-and-methods">Implement properties and methods</h3><p>Next, you can implement any properties and/or methods specific for that widget. This snippet shows how to take advantage of <a href="#typescript-decorators">decorators</a> for these properties.</p><pre><code class="ts"><span class="hljs-comment">// Create 'name' property</span>
<span class="hljs-meta">@property</span>()
<span class="hljs-meta">@renderable</span>()
name: <span class="hljs-built_in">string</span> = <span class="hljs-string">"John Smith"</span>;

<span class="hljs-comment">// Create 'emphasized' property</span>
<span class="hljs-meta">@property</span>()
<span class="hljs-meta">@renderable</span>()
emphasized: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;

<span class="hljs-comment">// Create private _onNameUpdate method</span>
<span class="hljs-keyword">private</span> _onNameUpdate(): <span class="hljs-built_in">string</span> { <span class="hljs-keyword">return</span> <span class="hljs-string">'${this.name}'</span>;}
</code></pre><p>By default, functions referenced in your elements will have <code>this</code> set to the actual element. Optionally, you can use the <a href="http://maquettejs.org/docs/typedoc/interfaces/_maquette_.vnodeproperties.html#bind">bind</a> attribute to update <code>this</code>. The following binds the <code>_onNameUpdate</code> callback method which is used when listening for <code>name</code> property updates. This is displayed in the <a href="../../api-reference/esri-widgets-Widget.html#postInitialize">postInitialize</a> method below.</p><pre><code class="ts"><span class="hljs-keyword">class</span> HelloWorld <span class="hljs-keyword">extends</span> declared(Widget) {

  <span class="hljs-keyword">constructor</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">super</span>();
    <span class="hljs-keyword">this</span>._onNameUpdate = <span class="hljs-keyword">this</span>._onNameUpdate.bind(<span class="hljs-keyword">this</span>);
  }

}
</code></pre><p>The <a href="../../api-reference/esri-widgets-Widget.html#postInitialize">postInitialize</a> method is called when the widget's properties are ready, but before it is rendered. In the snippet below we are watching for the <code>name</code> property. Once updated, it calls the <code>_onNameUpdate</code> callback method. The <a href="../../api-reference/esri-core-watchUtils.html#init">watchUtils.init()</a> call returns a <a href="../../api-reference/esri-core-Accessor.html#WatchHandle">WatchHandle</a> object which is then passed into <a href="../../api-reference/esri-widgets-Widget.html#own">own()</a>. This helps tidy up any resources once the widget is destroyed.</p><pre><code class="ts">  postInitialize() {
    <span class="hljs-keyword">const</span> handle = watchUtils.init(<span class="hljs-keyword">this</span>, <span class="hljs-string">"name"</span>, <span class="hljs-keyword">this</span>._onNameUpdate);

    <span class="hljs-comment">// Helper used for cleaning up resources once the widget is destroyed</span>
    <span class="hljs-keyword">this</span>.own(handle);
  }
</code></pre><h3 id="render-the-widget">Render the widget</h3><p>After the properties are implemented, the widget's UI is rendered using <a href="https://www.typescriptlang.org/docs/handbook/jsx.html">JSX</a>. This is handled in the widget's <a href="../../api-reference/esri-widgets-Widget.html#render">render</a> method, which is the only required method needed for widget implementation.</p><div class="esri-md panel trailer-1"><p>See <a href="#widget-rendering">Widget rendering</a> below for additional information specific to this.</p></div><div class="esri-md panel trailer-1"><p>Please note that widgets created as JSX elements are not yet supported. For example, the following snippet will not work.</p><p><code>const search = &lt;Search view={view} /&gt;;</code></p></div><p>The widget CSS is set via the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes#attr-class">class</a> attribute.</p><pre><code class="ts">render() {
  const classes = { "hello-world-emphasized": this.emphasized };

  return (
    &lt;div class = {this.classes("hello-world",classes)}&gt;
      {this._onNameUpdate()}
    &lt;/div&gt;
  );
}
</code></pre><div class="esri-md panel trailer-1"><p>Prior to version 4.7, if you needed a more dynamic approach you would use <a href="https://maquettejs.org/typedoc/interfaces/vnodeproperties.html#classes">classes</a>. This expected an object where the key represented the CSS class to toggle. The class was added if its value was true and removed if false.</p><p>Beginning with 4.7, do not use this property. Rather use the <a href="../../api-reference/esri-widgets-Widget.html#classes">classes</a> helper method. This method simplifies setting the CSS <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes#attr-class">class</a> attribute.</p></div><p>Lastly, calling <a href="../../api-reference/esri-widgets-Widget.html#destroy">destroy</a> on the widget will dispose the widget and free up all resources registered with the <code>own()</code> method referenced in <a href="../../api-reference/esri-widgets-Widget.html#postInitialize">postInitialize</a> below.</p><pre><code class="ts">postInitialize() {
  <span class="hljs-keyword">const</span> handle = watchUtils.init(<span class="hljs-keyword">this</span>, <span class="hljs-string">"name"</span>, <span class="hljs-keyword">this</span>._onNameUpdate);

  <span class="hljs-comment">// Helper used for cleaning up resources once the widget is destroyed</span>
  <span class="hljs-keyword">this</span>.own(handle);
  }
</code></pre><h3 id="export-module">Export module</h3><p>At the very end of the code page, add a line to <a href="https://blog.oio.de/2014/01/31/an-introduction-to-typescript-module-system/#ConsumeExternalModules">export</a> the object.</p><pre><code class="ts"><span class="hljs-keyword">export</span> = HelloWorld;
</code></pre><h3 id="completed-code">Completed code</h3><p>The <a href="../../sample-code/widgets-custom-widget/index.html">Create custom widget</a> sample shows the <em>.tsx</em> file in its entirety. This TypeScript file uses this extension to indicate that the class uses <a href="https://www.typescriptlang.org/docs/handbook/jsx.html">JSX</a>, e.g. <code>.ts + .jsx = .tsx</code>.</p><h2 id="widget-rendering">Widget rendering</h2><p>The properties listed below can be used for rendering the widget:</p><ul><li><a href="https://maquettejs.org/typedoc/interfaces/vnodeproperties.html#classes">classes:</a> (Deprecated at 4.7) This property allows CSS classes to be added and removed dynamically. Beginning with version 4.7, please use the <a href="../../api-reference/esri-widgets-Widget.html#classes">classes</a> helper method instead.</li><li><a href="http://maquettejs.org/typedoc/interfaces/vnodeproperties.html#styles">styles:</a> Allows styles to be changed dynamically.</li><li><a href="https://maquettejs.org/typedoc/interfaces/vnodeproperties.html#aftercreate">afterCreate:</a> This callback method executes after the node is added to the DOM. Any child nodes and properties have already been applied. Use this method within <a href="../../api-reference/esri-widgets-Widget.html#render">render</a> to access the real DOM node. It is also possible to use per element.</li><li><a href="http://maquettejs.org/typedoc/interfaces/vnodeproperties.html#afterupdate">afterUpdate:</a> This callback method executes every time the node is updated.</li><li><a href="http://maquettejs.org/typedoc/interfaces/vnodeproperties.html#bind">bind:</a> This property is used to set the value of <code>this</code> for event handlers.</li><li><a href="http://maquettejs.org/typedoc/interfaces/vnodeproperties.html#key">key:</a> This is used to uniquely identify a DOM node among its siblings. This is important if you have sibling elements with the same selector and the elements are added/removed dynamically.</li></ul><p></p><div class="trailer-2 js-tab-group"><nav class="tab-nav"><a class="tab-title is-active js-tab">classes</a> <a class="tab-title js-tab">styles</a> <a class="tab-title js-tab">afterCreate</a> <a class="tab-title js-tab">afterUpdate</a> <a class="tab-title js-tab">bind</a> <a class="tab-title js-tab">key</a></nav><section class="tab-contents"><article class="tab-section is-active js-tab-section"><pre><code>
<span class="hljs-comment">// Newer method which works with the Widget's classes helper method.</span>
render() {
  <span class="hljs-keyword">const</span> dynamicClass = {
    [<span class="hljs-meta">CSS.bold</span>]: <span class="hljs-keyword">this</span>.isBold,
    [<span class="hljs-meta">CSS.italic</span>]: <span class="hljs-keyword">this</span>.isItalic
  }

  <span class="hljs-keyword">return</span> {
    &lt; div <span class="hljs-keyword">class</span>={<span class="hljs-keyword">this</span>.classes(CSS.<span class="hljs-keyword">base</span>, dynamicClass)}&gt;Hello World!&lt;/div&gt;
  };
}

<span class="hljs-comment">// Older method which works with the classes property.</span>
<span class="hljs-comment">// Use this if working in versions prior to 4.7.</span>
render() {
  <span class="hljs-keyword">const</span> dynamicClass = {
    [<span class="hljs-meta">CSS.bold</span>]: <span class="hljs-keyword">this</span>.isBold,
    [<span class="hljs-meta">CSS.italic</span>]: <span class="hljs-keyword">this</span>.isItalic
  };

  <span class="hljs-keyword">return</span> (
    &lt;div <span class="hljs-keyword">class</span>={CSS.<span class="hljs-keyword">base</span>} classes={dynamicClass}&gt;Hello World!&lt;/div&gt;
  );
}
</code></pre></article><article class="tab-section js-tab-section"><pre><code>
render() {
  <span class="hljs-keyword">const</span> dynamicStyles = {
    background-color: <span class="hljs-keyword">this</span>.__hasBackgroundColor ? <span class="hljs-string">"chartreuse"</span> : <span class="hljs-string">""</span>
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">styles</span>=<span class="hljs-string">{dynamicStyles}</span>&gt;</span>Hello World!<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre></article><article class="tab-section js-tab-section"><pre><code>
<span class="hljs-keyword">private</span> _doSomethingWithRootNode(element: Element){
  console.log(element);
}

<span class="hljs-keyword">private</span> _doSomethingWithChildNode(element: Element){
  console.log(element);
}

<span class="hljs-comment">// Access real DOM node within render()</span>
render() {
  <span class="hljs-keyword">return</span> (
    &lt;div afterCreate={<span class="hljs-keyword">this</span>._doSomethingWithRootNode}&gt;Hello World!&lt;/div&gt;
  );
}

<span class="hljs-comment">// Can also be used per element</span>

render() {
  <span class="hljs-keyword">return</span> (
    &lt;div afterCreate={<span class="hljs-keyword">this</span>._doSomethingWithRootNode}&gt;
      &lt;span afterCreate={<span class="hljs-keyword">this</span>._doSomethingWithChildNode}&gt;Hello World!&lt;span&gt;
    &lt;/div&gt;
  );
}

</code></pre></article><article class="tab-section js-tab-section"><pre><code>
private _afterUpdate(element: Element){
  <span class="hljs-built_in">console</span>.log(element);
}

render() {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">afterUpdate</span>=<span class="hljs-string">{this._afterUpdate}</span>&gt;</span>Hello world!<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}</code></pre></article><article class="tab-section js-tab-section"><pre><code>
<span class="hljs-keyword">private</span> _whatIsThis(): void {
  console.log(<span class="hljs-string">'this === widget: ${this}'</span>);
}

render() {
  <span class="hljs-keyword">return</span> (
    &lt;div bind={<span class="hljs-keyword">this</span>} onclick={<span class="hljs-keyword">this</span>._whatIsThis}&gt;<span class="hljs-string">'this'</span> <span class="hljs-keyword">is</span> the widget instance&lt;/div&gt;
  );
}</code></pre></article><article class="tab-section js-tab-section"><pre><code>
<span class="hljs-comment">// Key is specified as 'string's in sample below but can also be a number or object.</span>

render() {
  <span class="hljs-keyword">const</span> top = <span class="hljs-keyword">this</span>.hasTop ? <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">{CSS.item}</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"top"</span>&gt;</span>Top<span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span></span> : <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">const</span> middle = <span class="hljs-keyword">this</span>.hasMiddle ? <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">{CSS.item}</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"middle"</span>&gt;</span>Middle<span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span></span> : <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">const</span> bottom = <span class="hljs-keyword">this</span>.hasBottom ? <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">{CSS.item}</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"bottom"</span>&gt;</span>Bottom<span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span></span> : <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ol</span>&gt;</span>
      {top}
      {middle}
      {bottom}
    <span class="hljs-tag">&lt;/<span class="hljs-name">ol</span>&gt;</span></span>
  );
}</code></pre></article></section></div><p></p><p>In addition to the methods mentioned above, there is also a <a href="../../api-reference/esri-widgets-support-widget.html#storeNode">storeNode</a> convenience method. You would use this to assign an <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement">HTMLElement</a> DOM node reference to a variable. This uses a custom data attribute, <code>data-node-ref</code>, to store a reference to an element's DOM node. In order for this to work correctly, it must also be bound to the widget instance, e.g. <code>bind={this}</code>, as shown in the snippet below.</p><pre><code class="ts"><span class="hljs-comment">// Assign the data-node-ref attribute to a DOM node value.</span>
<span class="hljs-comment">// It should be used in conjunction with the `bind` property</span>
<span class="hljs-comment">// and is used when working with the storeNode convenience method.</span>

rootNode: HTMLElement = <span class="hljs-literal">null</span>;

render() {
  <span class="hljs-keyword">return</span> (
    &lt;div afterCreate={storeNode} bind={<span class="hljs-keyword">this</span>} data-node-ref=<span class="hljs-string">"rootNode"</span> /&gt;
  );
}
</code></pre><h2 id="additional-information">Additional information</h2><p>Please refer to these additional links for further information:</p><ul><li><a href="../../sample-code/widgets-custom-widget/index.html">Create custom widget</a></li><li><a href="../../sample-code/widgets-custom-recenter/index.html">Recenter widget</a></li><li><a href="../../guide/typescript-setup/index.html">TypeScript Setup</a></li><li><a href="../../api-reference/esri-core-Accessor.html">Accessor</a> class</li><li><a href="../../guide/implementing-accessor/index.html">Implementing Accessor</a></li><li><a href="../../guide/working-with-props/index.html">Guide - Working with properties</a></li><li><a href="../../guide/styling/index.html">Styling</a></li><li><a href="https://www.typescriptlang.org">TypeScript</a> reference</li><li><a href="https://www.typescriptlang.org/docs/handbook/jsx.html">JSX</a> reference</li><li><a href="../../guide/migrating/index.html#properties">Migrating from 3.x to 4.9</a></li></ul></div></article></main></div><div class="footnote feedback right trailer-1"><a class="icon-ui-contact hide js-feedback" href="mailto:js_feedback@esri.com?subject=Feedback%20on%204.9%20-%20guide:%20Widget%20development&body=Hello,%0A%0AI%20was%20reading%20the%20ArcGIS%20API%20for%20JavaScript%20version%204.9%20documentation%20and%20have%20some%20feedback.%0A%0ADocumentation%20details:%0APage%20title:%20%7BREPLACE_TITLE%7D%0APage%20URL:%20%7BREPLACE_URL%7D%0A%0A">Feedback on this topic?</a></div></div></div><footer class="footer leader- link-dark-gray" role="contentinfo"><div class="grid-container"><nav class="column-6"><h6>ArcGIS for Developers</h6><ul class="list-plain"><li><a href="/">Home</a></li><li><a href="/features/">Features</a></li><li><a href="/documentation/">Documentation</a></li><li><a href="/support/">Support</a></li><li><a href="/pricing/">Pricing</a></li><li><a href="/startups/">Startups</a></li><li><a href="https://blogs.esri.com/esri/arcgis/category/developer/">Blog</a></li></ul></nav><nav class="column-6"><h6>ArcGIS Platform</h6><ul class="list-plain"><li><a href="http://arcgis.com">ArcGIS Online</a></li><li><a href="http://desktop.arcgis.com">ArcGIS Desktop</a></li><li><a href="http://server.arcgis.com">ArcGIS Enterprise</a></li><li><a href="http://developers.arcgis.com">ArcGIS for Developers</a></li><li><a href="http://solutions.arcgis.com">ArcGIS Solutions</a></li><li><a href="http://marketplace.arcgis.com">ArcGIS Marketplace</a></li></ul></nav><nav class="column-6"><h6>About Esri</h6><ul class="list-plain"><li><a href="http://www.esri.com/about-esri/">About Us</a></li><li><a href="http://www.esri.com/careers/">Careers</a></li><li><a href="https://blogs.esri.com/esri/esri-insider/">Insiders Blog</a></li><li><a href="http://www.esri.com/events/user-conference/index.html">User Conference</a></li><li><a href="http://www.esri.com/events/devsummit/index.html">Developer Summit</a></li></ul></nav><nav class="column-6"><a class="esri-logo" href="http://esri.com" aria-label="Esri Home"></a><div class="footer-social-nav leader-1"><a class="icon-social-twitter" aria-label="Esri on Twitter" href="https://twitter.com/Esri/"></a> <a class="icon-social-facebook" aria-label="Esri on Facebook" href="https://www.facebook.com/esrigis/"></a> <a class="icon-social-github" aria-label="Esri on GitHub" href="http://esri.github.com/"></a> <a class="icon-social-contact" aria-label="Contact Esri" href="http://www.esri.com/about-esri/contact/"></a></div></nav><div class="column-24 leader-1"><p><small><a href="http://www.esri.com/legal/copyright-trademarks">Copyright Â© 2018 Esri</a>. All rights reserved. | <a href="http://www.esri.com/legal/privacy">Privacy</a> | <a href="http://www.esri.com/legal/software-license">Terms of use</a> | <a href="/terms/faq/">FAQ</a></small></p></div></div></footer><script></script><script>var relativePath=document.URL.replace(/[-\w\d]*\.(html|css|js).*/,"../../..")</script><script src="../../../assets/js/config.js"></script><script src="../../../assets/js/preparse.js"></script><div class="js-modal modal-overlay modifier-class" data-modal="modal-keyboard-shortcuts"><div class="modal-content column-8" aria-label="modal" role="dialog"><a class="js-modal-toggle right" href="#" aria-label="close-modal"><svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 32 32" class="svg-icon"><path d="M18.404 16l9.9 9.9-2.404 2.404-9.9-9.9-9.9 9.9L3.696 25.9l9.9-9.9-9.9-9.898L6.1 3.698l9.9 9.899 9.9-9.9 2.404 2.406-9.9 9.898z"/></svg></a><h4>Keyboard shortcuts</h4><hr class="leader-0 trailer-half"><div><table class="table-plain keyboard-mappings"><thead><tr><th></th><th>Site wide shortcuts</th></tr></thead><tbody><tr><td><kbd>?</kbd></td><td>Bring up this help dialog</td></tr><tr><td><kbd>esc</kbd></td><td>Dismiss this help dialog</td></tr><tr><td><kbd>g</kbd><kbd>h</kbd></td><td>Go to Home</td></tr><tr><td><kbd>g</kbd><kbd>g</kbd></td><td>Go to Guide</td></tr><tr><td><kbd>g</kbd><kbd>a</kbd></td><td>Go to API Reference</td></tr><tr><td><kbd>g</kbd><kbd>s</kbd></td><td>Go to Sample Code</td></tr><tr><td><kbd>g</kbd><kbd>t</kbd></td><td>Scroll to top of page</td></tr><tr><td><kbd>spacebar</kbd></td><td>Scroll page down</td></tr><tr><td><kbd>shift spacebar</kbd></td><td>Scroll page up</td></tr><tr><td><kbd>g</kbd><kbd>b</kbd></td><td>Scroll to bottom of page</td></tr></tbody></table></div></div></div><script src="../../../assets/js/libs/url-search-params.js"></script><script src="../../../assets/js/calcite-web.js"></script><script src="../../../assets/js/calcite-web-extend.js"></script><script src="../../../assets/js/libs/mousetrap.js"></script><script>"function"==typeof Mousetrap&&"object"==typeof calcite&&"function"==typeof Mousetrap&&"object"==typeof calcite&&Mousetrap.bind(["g h","g g","g a","g s","?","g t","g b"],function(e,t){calcite.bus.emit("keyboard:mousetrap",{event:e,combination:t,navigation:{h:"../../../index.html",g:"../../../latest/guide/index.html",a:"../../../latest/api-reference/index.html",s:"../../../latest/sample-code/index.html"}})})</script></body></html>
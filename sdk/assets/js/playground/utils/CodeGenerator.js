/*! ArcGIS API for JavaScript 4.9 | Copyright (c) 2018 Esri. All rights reserved. | http://www.esri.com/legal/privacy | https://developers.arcgis.com/terms/faq */
define(["esri-playground-js/utils/ASTClasses"],function(l){var u=function(e,r,t){var n=l.getMemberExpression(),i=l.getIdentifier(e),a=l.getIdentifier(r);return n.object=i,n.property=a,n.computed=t,n},f=function(e){var r=l.getNewExpression(),t=l.getIdentifier(e);return r.callee=t,r},c=function(e){var r=l.getUnaryExpression("-",!0),t=l.getLiteral(Math.abs(e));return r.argument=t,r},e={};var o=function(e,r,t){if(e.className!==r)for(var n=0;n<e.properties.length;n++){var i=e.properties[n];if(r===i.name)return i;if("Class"===i.type&&i.className===r){if(o(i.config,r,t))return i}else if("Array"===i.type)for(var a=0;a<i.properties.length;a++){var s=i.properties[a];if(o(s.config,r,t))return i}}else for(a=0;a<e.properties.length;a++){if((s=e.properties[a]).name===t)return s}return!1};return e.getAST=function(e,r){var t,n,i,a,s,o=l.getProgram();return o.body.push((t=e,n=r,i=l.getVariableDeclaration(l.Kind.VAR),a=l.getVariableDeclarator(),(s=l.getNewExpression()).callee=l.getIdentifier(t),a.id=l.getIdentifier(n),a.init=s,i.declarations.push(a),i)),o},e.getAutocastAST=function(e,r,t){var n,i,a,s,o=l.getProgram(),p=(n=e,i=l.getVariableDeclaration(l.Kind.VAR),a=l.getVariableDeclarator(),s=l.getObjectExpression(),a.id=l.getIdentifier(n),a.init=s,i.declarations.push(a),i),u=p.declarations[0].init.properties,f=l.getProperty(l.getIdentifier("type"),l.getLiteral(r));u.push(f);var c=t.body[0].declarations[0].init.arguments,g=c&&c[0]&&c[0].properties;return g&&g.forEach(function(e){if("ArrayExpression"===e.value.type){var i=l.getArrayExpression();e.value.elements.forEach(function(e){if("NewExpression"===e.type&&e._autocastType){var r=l.getObjectExpression(),t=l.getProperty(l.getIdentifier("type"),l.getLiteral(e._autocastType));r.properties.push(t);var n=e.arguments&&e.arguments[0]&&e.arguments[0].properties;n&&n.forEach(function(e){r.properties.push(e)}),i.elements.push(r)}else i.elements.push(e)});var r=l.getProperty(l.getIdentifier(e.key.name),i);u.push(r)}else u.push(e)}),o.body.push(p),o},e.constructAST=function(e){if(e.ast){var r=e.ast,t=e.config,a=e.statefulObject,s=r.body[0].declarations[0].init.arguments=[];return t.properties.forEach(function(e){var r,t=e.name,n=a[t];if(!(null==n||n instanceof Object&&function e(r){if(Array.isArray(r))return!r.length;var t=!0;for(var n in r)r.hasOwnProperty(n)&&"_watchCallbacks"!==n&&"className"!==n&&(r[n]instanceof Object?t=e(r[n]):null!=r[n]&&(t=!1));return t}(n))){var i=function i(n,a){var e,r=n.type;if("Number"===r)return e=0<=a?l.getLiteral(Number(a)):c(Number(a));if("Boolean"===r)return e=l.getLiteral(a);if("String"===r)return e=n.options&&"constants"===n.options.type?u(n.options.className,a,!1):l.getLiteral(a);if("Color"===r){var s=l.getArrayExpression();return a.forEach(function(e){var r=l.getLiteral(e);s.elements.push(r)}),s}if("Object"===r){var o=l.getObjectExpression();if(a instanceof Object){var t=n.config,p=t?t.properties:n.properties;p.forEach(function(e){var r=e.name;if(null!=a[r]){var t=i(e,a[r]);if(t){var n=l.getProperty(l.getIdentifier(r),t);o.properties.push(n)}}})}return o.properties.length&&o}if("Array"===r){var s=l.getArrayExpression();return a.forEach(function(e,r){if(n.properties[r]){var t=i(n.properties[r],e);s.elements.push(t)}}),s.elements.length&&s||null}if("Class"===r){e=f(n.className||n.name),n.config.autocastType&&(e._autocastType=n.config.autocastType);var p=n.config.properties,o=l.getObjectExpression();return a instanceof Object&&p.forEach(function(e){var r=e.name;if(null!=a[r]){var t=i(e,a[r]);if(t){var n=l.getProperty(l.getIdentifier(r),t);o.properties.push(n)}}}),o.properties.length&&e.arguments.push(o),e}}(e,n);i&&(r=l.getProperty(l.getIdentifier(t),i),0===s.length&&s.push(l.getObjectExpression()),s[0].properties.push(r))}}),r}},e.getProperty=o,e.generateCode=function(e){return escodegen.generate(e,{format:{quotes:"double",compact:!0}})},e});